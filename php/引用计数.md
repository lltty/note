PHP5.3之前使用旧的垃圾回收机制，会导致循环引用产生变量容器无法回收导致内存泄漏的问题，5.3之后引入了新的gc回收机制。也就是根缓存机制，
php启动时候，默认设置指定大小的跟缓冲区(10000)，当php发现有循环引用的zval时，就会丢入根缓冲区，当根缓冲区满的时候，会进行垃圾回收。

基本准则:
一个zval的引用计数增加，它将被继续使用，当然基于不是垃圾。如果引用计数减少到0，所在容器会被清除。所以说，仅仅在引用计数减少到非0时候，
才会产生垃圾周期。然后在垃圾周期中，通过检查引用计数是否减1，并且检查哪些变量的引用次数是0，来判定哪部分是垃圾。

那么问题来了，怎么判断哪些变量的引用次数是0？
这里使用的是模拟删除的方式，模拟恢复的方式。

引用原文地址:[laruence.com/2018/04/08/3170.html]([laruence.com/2018/04/08/3170.html])