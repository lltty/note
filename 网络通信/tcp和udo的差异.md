### 1 建立连接方式的差异

3次握手和四次回首
3次握手是客户端主动触发两次,服务端触发一次。

TCP建立连接并且初始化的目标是什么：
1. 初始化资源
2 告诉对方序列号

所以三次握手是这样的：
1. client端首先发送一个SYN包告诉Server端我的初始化序列号是X;
2. server端收到SYN包后回复给client一个ACK确认包，告诉client说我收到了;
3. 接着Server端也需要告诉client端自己的初始化序列号，于是Server也发送一个SYN包告诉client我的初始化序列号是y;
4. client收到后，回复Server一个ACK确认我知道了。
其中2,3步骤是合并为一个步骤的，就是将两个包一同发送给client.

那udp就比较简单了，它不需要前面的步骤，换句话说，不需要建立连接的过程，直接发送的

### 2 数据发送方的差异
由于tcp是建立在两端连接之上的协议，所以理论上是没有数据流大小的限制的，但是由于缓冲区的大小，所以发送的大数据，可能被截成好几段发送。
由于UDP本身发送的就是一份一份的数据，所以自然而然就是有大小限制的。
UDP协议中有16位的报文长度，所以UDP大小是2^16=65536

### 3 数据有序性的差异
TCP本身有数据重传机制，所以需要保证数据的有序性传输，而UDP就比较奔放了，不管server缓冲区多大，接收client过来的数据都是一个一个接收。由于UDP本身不保证有序性，所以即使client是1，2，3顺序发的，server端也有可能受到无序的。

#### 4 导致UDP包数据丢失的情况
1. 数据报分片重组丢失 UDP协议本身规定的数据大小是64KB,但是在链路层的MTU限制，大小是5KB.所以当发送一个很大UDP包的时候，这个包会在IP层进行分片，然后重组。这个过程会就有可能导致分片的包丢失。

2. UDP缓冲区填充:当UDP的缓冲区已经填满的时候，接收方还没有处理这部分的UDP数据报，这个时候再过来的数据就没有地方保存了，自然就会丢弃。